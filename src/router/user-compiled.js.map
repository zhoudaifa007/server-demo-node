{"version":3,"sources":["user.js"],"names":[],"mappings":"AAAA,MAAM,iBAAiB,QAAQ,0BAAR,CAAvB;AACA,MAAM,UAAU,QAAQ,mBAAR,CAAhB;AACA,MAAM,eAAe,QAAQ,uBAAR,CAArB;AACA,MAAM,aAAa,QAAQ,qBAAR,CAAnB;;AAEA,MAAM,YAAY,UAAU,EAAV,EAAc,SAAd,EAAyB,cAAc,CAAvC,EAA0C,WAAW,EAArD,EAAyD;AACzE,QAAM,OAAO,eAAe,UAAf,EAAb;AACA;AACA,QAAM,WAAW,IAAI,OAAJ,CAAY,WAAZ,EAAyB,QAAzB,CAAjB;AACA,iBAAe,KAAf,CAAqB,SAArB,EAAgC,IAAhC,EAAsC,MAAtC,EAA8C,MAA9C,EAAsD,QAAtD,EAAgE,UAAU,EAA1E;AACD,CALD;;AAOA,MAAM,QAAQ,UAAU,SAAV,EAAqB,cAAc,CAAnC,EAAsC,WAAW,EAAjD,EAAqD;AACjE,QAAM,OAAO,eAAe,UAAf,EAAb;AACA;AACA,QAAM,WAAW,IAAI,OAAJ,CAAY,WAAZ,EAAyB,QAAzB,CAAjB;AACA,iBAAe,KAAf,CAAqB,SAArB,EAAgC,IAAhC,EAAsC,GAAtC,EAA2C,MAA3C,EAAmD,QAAnD;AACD,CALD;;AAOA,SAAS,IAAT,CAAc,MAAd,EAAsB,MAAtB,EAA8B;;AAG5B,MAAI,OAAO,IAAX;AACA,MAAI,MAAJ,EAAY;AACV,UAAM,UAAU,aAAa,MAAb,CAAhB;AACA,QAAI,QAAQ,IAAR,CAAa,MAAb,GAAsB,CAA1B,EAA6B;AAC3B,aAAO,OAAP;AACD,KAFD,MAEO;AACL,aAAO,SAAP;AACD;AACF,GAPD,MAOO;AACL,QAAI,OAAO,MAAP,GAAgB,CAApB,EAAuB;AACrB,aAAO,MAAP;AACD,KAFD,MAEO;AACL,aAAO,SAAP;AACD;AACF;AACD;AACA,OAAK,GAAL,CAAS,IAAT,CAAc,IAAd;AACD;;AAED,MAAM,SAAS,UAAU,GAAV,EAAe;AAC5B,MAAI,GAAJ,CAAQ,WAAR,EAAqB,UAAU,GAAV,EAAe,GAAf,EAAoB;AACvC,QAAI,QAAQ,IAAI,KAAhB,EAAuB;AACrB,gBAAU,IAAI,KAAJ,CAAU,EAApB,EAAwB,KAAK,IAAL,CAAU;AAChC;AADgC,OAAV,CAAxB;AAGD,KAJD,MAIO;AACL,UAAI,iBAAiB,IAAI,KAArB,IAA8B,cAAc,IAAI,KAApD,EAA2D;AACzD,cAAM,KAAK,IAAL,CAAU;AACd;AADc,SAAV,CAAN,EAEI,IAAI,KAAJ,CAAU,WAFd,EAE2B,IAAI,KAAJ,CAAU,QAFrC;AAGD,OAJD,MAIO;AACL,cAAM,KAAK,IAAL,CAAU;AACd;AADc,SAAV,CAAN;AAGD;AACF;AACF,GAhBD;;AAkBA,MAAI,GAAJ,CAAQ,WAAR,EAAqB,UAAU,GAAV,EAAe,GAAf,EAAoB;AACvC,QAAI,IAAJ,CAAS,WAAW,iBAAX,CAA6B,iBAA7B,EAAT;AACD,GAFD;AAGD,CAtBD;;AAwBA,OAAO,OAAP,GAAiB,MAAjB","file":"user-compiled.js","sourcesContent":["const mysqlOperation = require('../utils/connectDataBase');\r\nconst PageIfo = require('../model/PageInfo');\r\nconst dbResultDeal = require('../utils/dbResultDeal')\r\nconst obfuscator = require('../utils/obfuscator')\r\n\r\nconst queryById = function (id, operation, currentPage = 0, pageSize = 10) {\r\n  const pool = mysqlOperation.createPool();\r\n  // mysqlOperation.query(operation, connect, 'name', 'user');\r\n  const pageInfo = new PageIfo(currentPage, pageSize);\r\n  mysqlOperation.query(operation, pool, 'name', 'user', pageInfo, 'id = ' + id);\r\n}\r\n\r\nconst query = function (operation, currentPage = 0, pageSize = 10) {\r\n  const pool = mysqlOperation.createPool();\r\n  // mysqlOperation.query(operation, connect, 'name', 'user');\r\n  const pageInfo = new PageIfo(currentPage, pageSize);\r\n  mysqlOperation.query(operation, pool, '*', 'user', pageInfo);\r\n}\r\n\r\nfunction show(result, isPage) {\r\n\r\n\r\n  let send = null;\r\n  if (isPage) {\r\n    const dealRes = dbResultDeal(result)\r\n    if (dealRes.data.length > 0) {\r\n      send = dealRes;\r\n    } else {\r\n      send = '没有查寻到数据';\r\n    }\r\n  } else {\r\n    if (result.length > 0) {\r\n      send = result;\r\n    } else {\r\n      send = '没有查寻到数据';\r\n    }\r\n  }\r\n  // console.log(send);\r\n  this.res.send(send);\r\n}\r\n\r\nconst router = function (app) {\r\n  app.get('/api/user', function (req, res) {\r\n    if ('id' in req.query) {\r\n      queryById(req.query.id, show.bind({\r\n        res\r\n      }));\r\n    } else {\r\n      if ('currentPage' in req.query && 'pageSize' in req.query) {\r\n        query(show.bind({\r\n          res\r\n        }), req.query.currentPage, req.query.pageSize);\r\n      } else {\r\n        query(show.bind({\r\n          res\r\n        }));\r\n      }\r\n    }\r\n  });\r\n\r\n  app.get('/api/test', function (req, res) {\r\n    res.send(obfuscator.obfuscationResult.getObfuscatedCode());\r\n  });\r\n}\r\n\r\nmodule.exports = router;"]}